% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/common_min.R
\name{calculate_and_interpolate_common_min}
\alias{calculate_and_interpolate_common_min}
\title{Calculate Common Minimum and Generate Common Min Points with Accuracy}
\usage{
calculate_and_interpolate_common_min(data, verbose = FALSE)
}
\arguments{
\item{data}{Cleaned transect data with columns: \code{transect}, \code{year},
\code{distance}, \code{elevation}, \code{cross_island}, \code{park},
\code{sigma_h}, \code{sigma_v}, \code{accuracy_tier}}

\item{verbose}{Logical. If TRUE, print warnings for edge cases (default: FALSE)}
}
\value{
Tibble of common_min points to add/replace in dataset, with columns:
  \describe{
    \item{transect}{Transect identifier}
    \item{year}{Survey year}
    \item{distance}{The common_min distance for this transect}
    \item{elevation}{Either existing or interpolated elevation at common_min}
    \item{point_type}{"common_min" for all rows}
    \item{park}{Park identifier}
    \item{cross_island}{Always FALSE for common_min points}
    \item{sigma_h}{Horizontal standard error (from existing point or averaged)}
    \item{sigma_v}{Vertical standard error (from existing point or averaged)}
    \item{accuracy_tier}{Quality tier}
    \item{uncertainty}{Position uncertainty (meters, 1-sigma)}
    \item{confidence}{"high", "moderate", or "low"}
    \item{uncertainty_95ci}{95\% confidence interval (Â±1.96*uncertainty)}
    \item{slope}{Slope at common_min (NA if existing point, calculated if interpolated)}
  }
}
\description{
For land-to-water (non-cross-island) transects, this function:
\enumerate{
  \item Calculates the common minimum distance (max of yearly minimums)
  \item For each transect-year, returns exactly one point at the common_min distance
  \item Includes uncertainty and confidence calculations based on accuracy values
}
}
\details{
The returned points should be used to add/replace points in the dataset. Each
transect-year will have one common_min point with either:
\itemize{
  \item The existing elevation if a point already exists at that distance
  \item An interpolated elevation if no point exists at that distance
}
}
\section{Point Skipping}{

Points are skipped if:
\itemize{
  \item common_min distance = 0 (to avoid conflicts with zero-crossing points)
  \item common_min is outside the measured range for that year
  \item Interpolation fails
  \item Slope is too flat (< 1e-6) causing numerical instability
  \item Accuracy values are missing or invalid
}
}

\section{Uncertainty Calculation}{

For interpolated points, uncertainty is calculated using error propagation
through linear interpolation, combining vertical and horizontal measurement
errors. Confidence levels are assigned based on slope magnitude using the
same thresholds as interpolated zero crossings.
}

\examples{
\dontrun{
# Calculate common minimum points for all transects
common_min_points <- calculate_and_interpolate_common_min(
  cleaned_data,
  verbose = TRUE
)

# Add common_min points to existing zero points
all_boundary_points <- bind_rows(zero_points, common_min_points)
}
}
