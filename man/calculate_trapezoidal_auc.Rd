% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/auc_weighted.R
\name{calculate_trapezoidal_auc}
\alias{calculate_trapezoidal_auc}
\title{Calculate AUC Using Trapezoidal Rule for One Segment}
\usage{
calculate_trapezoidal_auc(data, elev_col = "elev_weighted")
}
\arguments{
\item{data}{Dataframe subset for one segment (already filtered to one segment)}

\item{elev_col}{Name of elevation column to integrate
(default: "elev_weighted", alternatives: "elev_upper", "elev_lower")}
}
\value{
Scalar AUC value (can be negative if segment dips below zero)
}
\description{
Applies trapezoidal integration to calculate area under curve for a single
segment. CRITICALLY: This function does NOT filter out negative elevations.
Negative weighted elevations within a segment contribute negative area, which
correctly accounts for probabilistic uncertainty.
}
\details{
Why keep negative elevations?
  Consider a segment from 0-20m where most points are positive but one point
  at 10m has elev_weighted = -0.02m. If we remove it, the trapezoidal rule
  would draw a straight line across the gap, ignoring the probabilistic "dip"
  below zero. By keeping all points, negative weighted elevations contribute
  negative area, which is physically correct (there's a ~30% chance that
  point is below zero, so it reduces the total AUC appropriately).

Trapezoidal Formula:
  AUC = Σ[Δx × (y[i] + y[i+1]) / 2] for all consecutive point pairs
}
