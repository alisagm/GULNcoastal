% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/auc_weighted.R
\name{calculate_auc_with_uncertainty}
\alias{calculate_auc_with_uncertainty}
\title{Calculate AUC with Uncertainty for One Transect-Year}
\usage{
calculate_auc_with_uncertainty(data)
}
\arguments{
\item{data}{Dataframe for one transect-year with all Step 5 columns:
- distance, elevation, sigma_v, sigma_h, point_type
- Must include all measured, interpolated, extrapolated, and common_min points}
}
\value{
One-row dataframe with AUC results:
  - auc_nominal: Nominal (best-estimate) AUC using weighted elevations
  - auc_upper: Upper bound AUC (elevation + 1σ)
  - auc_lower: Lower bound AUC (elevation - 1σ)
  - auc_uncertainty: Uncertainty in AUC (half the range: (upper - lower) / 2)
  - auc_uncertainty_pct: Relative uncertainty as percentage
  - n_segments: Number of positive segments
  - segment_info: Nested list-column with per-segment details
  - segments: List of plotting segments (is_positive, x, y)
}
\description{
Main function that performs complete probability-weighted AUC calculation
with uncertainty propagation for a single transect-year.
}
\details{
Process:
  1. Calculate weighted elevations (nominal, upper, lower bounds)
  2. Identify positive segments based on nominal weighted elevations
  3. For each positive segment, integrate nominal/upper/lower elevations
  4. Sum segment contributions to get total AUC and bounds
  5. Calculate uncertainty metrics

If no positive segments exist, returns zeros for all metrics.
}
