% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/transects_pairwise.R
\name{run_pairwise_analysis}
\alias{run_pairwise_analysis}
\title{Run Pairwise Transect Analysis for Non-Cross-Island Transects}
\usage{
run_pairwise_analysis(
  data_dir,
  processed_dir = ".",
  output_dir = ".",
  accuracy_table_path = NULL,
  special_cases_path = NULL,
  save_results = TRUE,
  verbose = FALSE
)
}
\arguments{
\item{data_dir}{Character. Path to directory containing raw transect CSV
files. Each CSV must have columns: transect, year, distance, elevation.
Park is inferred from filename (must contain "GUIS" or "PAIS").}

\item{processed_dir}{Character. Path to directory to save intermediate
result data files. Created if it doesn't exist.}

\item{output_dir}{Character. Path to save results. Default is current
working directory. Created if it doesn't exist.}

\item{accuracy_table_path}{Character or NULL. Path to accuracy_values.csv
file containing measurement uncertainty by park/year. If NULL (default),
looks for "accuracy_values.csv" in \code{data_dir}.}

\item{special_cases_path}{Character or NULL. Path to special_cases.csv
file containing transect-specific accuracy overrides. If NULL (default),
looks for "special_cases.csv" in \code{data_dir}. This file is optional.}

\item{save_results}{Logical. If TRUE (default), saves results as RDS files
per park: \{park_code\}_pairwise_results.rds}

\item{verbose}{Logical. If TRUE, prints progress messages. Default FALSE.}
}
\value{
A list (returned invisibly) containing:
  \describe{
    \item{data}{Data frame. Final processed transect data for all pairs with
      pair_id column identifying which pair each observation belongs to.}
    \item{auc_results}{Data frame. AUC results by transect-year-pair with columns:
      transect, year, pair_id, year1, year2, auc, auc_upper, auc_lower, auc_sigma,
      auc_uncertainty_pct, overlap_m, overlap_pct, transect_length, n_segments,
      segment_info, segments.}
    \item{metadata}{List. Processing metadata including:
      \itemize{
        \item timestamp: When analysis was run
        \item excluded_years: Data frame showing which year was excluded per transect
        \item pair_summary: Data frame with pair counts per transect
        \item n_transects: Total number of transects analyzed
        \item n_pairs: Total number of pairs analyzed
        \item parks: Parks included
        \item workflow_version: "pairwise_v1"
      }}
  }
}
\description{
Executes pairwise transect analysis with year-specific common minimum
distances for non-cross-island transects. For each transect, excludes the
year with the highest minimum distance and calculates AUC for all unique
pairs of the remaining years.
}
\section{Pairwise Analysis Logic}{

\enumerate{
  \item Filter to only non-cross-island transects (cross_island = FALSE)
  \item For each transect, identify the year with the highest minimum distance
  \item Exclude that year from pairwise analysis
  \item Generate all unique pairs from remaining years (e.g., Y1-Y2, Y1-Y3, Y2-Y3)
  \item For each pair, calculate common minimum distance (max of the two yearly minimums)
  \item Calculate probability-weighted AUC for each year in each pair
}
}

\section{Key Differences from Standard Analysis}{

Unlike \code{\link{run_transect_analysis}}, which calculates a single common
minimum distance across all years, this function:
\itemize{
  \item Only processes non-cross-island transects
  \item Calculates unique common minimum for each year pair
  \item Excludes the year with highest minimum distance
  \item Returns results organized by pair_id
}
}

\examples{
\dontrun{
# Basic usage
results <- run_pairwise_analysis(
  data_dir = "path/to/raw/data",
  output_dir = "path/to/output"
)

# Access results
head(results$auc_results)
results$metadata$excluded_years
results$metadata$pair_summary
}

}
\seealso{
\code{\link{run_transect_analysis}} for standard (all-years) analysis
\code{\link{calculate_pairwise_common_min}} for pair-specific common minimum
}
